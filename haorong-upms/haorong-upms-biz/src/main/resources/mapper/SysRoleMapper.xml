<?xml version="1.0" encoding="UTF-8" ?>
<!-- 
  Copyright (c) 2025 沈阳浩荣科技有限公司 
  All rights reserved. 
  注意： 
  本项目源代码由沈阳浩荣科技有限公司原创开发，版权所有。 
 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haorong.cloud.upms.mapper.SysRoleMapper">
    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.haorong.cloud.upms.api.entity.SysRole">
        <id column="id" property="id"/>
        <result column="role_name" property="roleName"/>
        <result column="role_code" property="roleCode"/>
        <result column="role_desc" property="roleDesc"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>
    <select id="listRoleIdsByUserId" resultType="java.lang.String">
        SELECT sys_role.id
        FROM sys_role AS sys_role,
        sys_user_role AS sys_user_role
        WHERE sys_role.id = sys_user_role.role_id
        AND sys_user_role.user_id = #{userId}
    </select>
    <select id="selectRolePage" resultType="com.haorong.cloud.upms.api.entity.SysRole">
        SELECT
            sys_role.id,
            sys_role.role_name,
            sys_role.role_code,
            sys_role.role_desc,
            sys_role.create_time,
            sys_role.update_time,
            sys_role.del_flag,
            sys_role.tenant_id,
            sys_role.create_by,
            sys_role.update_by
        FROM
            sys_role AS sys_role
        <where>
            AND sys_role.del_flag = '0'
        <if test="query.roleName !=null and query.roleName !=''">
            AND sys_role.role_name = #{query.roleName}
        </if>
            <if test="query.roleCode !=null and query.roleCode !=''">
                AND sys_role.role_code = #{query.roleCode}
            </if>
        </where>
    </select>
</mapper>